<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Login - IESPR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-image: url("/img/decoracion.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }

      .hamburger span {
        transition: all 0.3s ease;
      }

      .hamburger.active span:nth-child(1) {
        transform: rotate(45deg) translateY(8px);
      }

      .hamburger.active span:nth-child(2) {
        opacity: 0;
      }

      .hamburger.active span:nth-child(3) {
        transform: rotate(-45deg) translateY(-8px);
      }
    </style>
  </head>

  <body class="min-h-screen pt-20 text-gray-800">
    <!-- Barra de navegación -->
    <nav
      class="fixed top-0 left-0 w-full z-50 bg-white/30 backdrop-blur-md shadow border-b border-gray-300"
    >
      <div
        class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"
      >
        <div class="flex items-center space-x-2">
          <i class="bx bxs-microphone-alt"></i>
          <span class="text-lg font-semibold text-gray-900">IESPR</span>
        </div>

        <button
          id="menu-toggle"
          class="hamburger md:hidden flex flex-col items-center justify-center w-8 h-8 space-y-1.5"
          aria-label="Abrir menú"
        >
          <span class="block w-6 h-0.5 bg-gray-800"></span>
          <span class="block w-6 h-0.5 bg-gray-800"></span>
          <span class="block w-6 h-0.5 bg-gray-800"></span>
        </button>

        <ul
          id="menu"
          class="transition-all duration-300 ease-in-out transform scale-95 opacity-0 md:opacity-100 md:scale-100 hidden md:flex flex-col md:flex-row md:items-center md:space-x-6 space-y-2 md:space-y-0 text-sm text-gray-700 text-center absolute md:static top-full left-0 w-full md:w-auto bg-white/30 md:bg-transparent backdrop-blur-md md:backdrop-blur-none md:shadow-none shadow-md py-4 md:py-0"
        >
          <li>
            <a href="/" class="block px-4 py-2 hover:underline">Inicio</a>
          </li>
          <li>
            <a href="/cupones" class="block px-4 py-2 hover:underline"
              >Cupones</a
            >
          </li>
          <li>
            <a href="/eventos" class="block px-4 py-2 hover:underline"
              >Eventos</a
            >
          </li>
          <li>
            <a href="/nosotros" class="block px-4 py-2 hover:underline"
              >Nosotros</a
            >
          </li>
        </ul>

        <a
          href="/login"
          class="hidden md:inline-block bg-black text-white px-4 py-2 rounded hover:bg-gray-900 text-sm"
        >
          Iniciar sesión
        </a>
      </div>
    </nav>

    <!-- Contenedor principal -->
    <section
      class="flex items-center justify-center px-6 md:px-12 lg:px-24 py-16 min-h-screen"
    >
      <div
        class="w-full max-w-md bg-white/80 backdrop-blur-md rounded-xl shadow-lg p-8"
      >
        <h1 class="text-2xl font-bold text-center text-gray-900 mb-6">
          Iniciar sesión
        </h1>

        <% if (error) { %>
        <p class="text-center text-red-600 text-sm font-medium mb-4">
          <%= error %>
        </p>
        <% } %>

        <form class="space-y-4" method="POST" action="/login">
          <div>
            <label
              for="username"
              class="block mb-1 text-sm font-medium text-gray-700"
            >
              Usuario
            </label>
            <input
              type="text"
              name="username"
              id="username"
              placeholder="usuario"
              required
              class="w-full p-3 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm"
            />
          </div>

          <div>
            <label
              for="password"
              class="block mb-1 text-sm font-medium text-gray-700"
            >
              Contraseña
            </label>
            <input
              type="password"
              name="password"
              id="password"
              placeholder="••••••••"
              required
              class="w-full p-3 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm"
            />
          </div>

          <button
            type="submit"
            class="w-full bg-[#00176B] hover:bg-[#326ac0] text-white font-medium rounded-lg text-sm px-5 py-2.5 transition-colors"
          >
            Entrar
          </button>

          <a
            href="/"
            class="block text-center text-sm text-gray-700 hover:underline mt-4"
          >
            Regresar al inicio
          </a>
        </form>
      </div>
    </section>

    <!-- Scripts -->
    <script src="/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get("error") === "sesion_expirada") {
        Swal.fire({
          icon: "warning",
          title: "Sesión expirada",
          text: "Por seguridad, tu sesión ha sido cerrada por inactividad.",
          confirmButtonText: "Entendido",
        });
      }

      // Menú hamburguesa
      const menuToggle = document.getElementById("menu-toggle");
      const menu = document.getElementById("menu");

      menuToggle.addEventListener("click", () => {
        menu.classList.toggle("hidden");

        if (!menu.classList.contains("hidden")) {
          setTimeout(() => {
            menu.classList.remove("opacity-0", "scale-95");
            menu.classList.add("opacity-100", "scale-100");
            menu.classList.remove("bg-white/30", "backdrop-blur-md");
            menu.classList.add("bg-white");
          }, 10);
        } else {
          menu.classList.remove("opacity-100", "scale-100", "bg-white");
          menu.classList.add(
            "opacity-0",
            "scale-95",
            "bg-white/30",
            "backdrop-blur-md"
          );
        }

        menuToggle.classList.toggle("active");
      });
    </script>
  </body>
</html>
