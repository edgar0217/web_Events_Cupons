<!-- Cupones Publicados -->
<section>
  <h2
    class="text-2xl sm:text-3xl font-bold mb-6 text-slate-700"
    data-aos="fade-left"
  >
    🎁 Cupones Disponibles
  </h2>
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <% listaCupones.forEach(cupon => { %>
    <div
      class="bg-white p-5 rounded-xl shadow hover:shadow-lg transition"
      data-aos="fade-up"
    >
      <% if (cupon.imagen_url) { %>
      <img
        src="<%= cupon.imagen_url %>"
        alt="Imagen cupón"
        class="w-full h-40 object-cover rounded-lg mb-3"
      />
      <% } %>
      <h3 class="text-xl font-semibold text-emerald-700 mb-1">
        <%= cupon.titulo %>
      </h3>
      <p class="text-sm text-gray-600 mb-1"><%= cupon.descripcion %></p>
      <p
        class="font-mono bg-emerald-100 text-emerald-800 px-3 py-1 rounded inline-block mb-3"
      >
        <%= cupon.codigo_cupon %>
      </p>

      <!-- Formulario Editar -->
      <form
        action="/cupones/<%= cupon.id %>/edit"
        method="POST"
        enctype="multipart/form-data"
        class="space-y-2"
      >
        <input
          type="text"
          name="titulo"
          value="<%= cupon.titulo %>"
          class="w-full p-2 border rounded-md focus:ring-2 focus:ring-yellow-300"
        />
        <textarea
          name="descripcion"
          required
          class="w-full p-2 border rounded-md focus:ring-2 focus:ring-yellow-300"
        >
<%= cupon.descripcion %></textarea
        >
        <input
          type="text"
          name="codigo_cupon"
          value="<%= cupon.codigo_cupon %>"
          class="w-full p-2 border rounded-md focus:ring-2 focus:ring-yellow-300"
        />

        <!-- Única Preview edición Cupón -->
        <div
          id="previewCuponEdit<%= cupon.id %>"
          class="mb-4 flex justify-center"
        ></div>

        <div class="flex gap-4">
          <!-- Botón Seleccionar Archivo Cupón Edición -->
          <div>
            <input
              type="file"
              name="imagen"
              accept="image/*"
              id="fileInputCuponSelectorEdit<%= cupon.id %>"
            />
            <label
              for="fileInputCuponSelectorEdit<%= cupon.id %>"
              class="cursor-pointer inline-block bg-yellow-500 text-white py-2 px-4 rounded-md hover:bg-yellow-600 transition select-none"
            >
              Seleccionar archivo
            </label>
          </div>

          <!-- Botón Tomar Foto Cupón Edición -->
          <div>
            <input
              type="file"
              name="imagen"
              accept="image/*"
              capture="environment"
              id="fileInputCuponCamaraEdit<%= cupon.id %>"
            />
            <label
              for="fileInputCuponCamaraEdit<%= cupon.id %>"
              class="cursor-pointer inline-block bg-yellow-600 text-white py-2 px-4 rounded-md hover:bg-yellow-700 transition select-none"
            >
              📷 Tomar Foto
            </label>
          </div>
        </div>

        <button
          class="w-full bg-yellow-500 text-white py-2 rounded-md hover:bg-yellow-600 font-medium"
        >
          Guardar Cambios
        </button>
      </form>

      <!-- Botón Eliminar -->
      <form
        id="form-eliminar-cupon-<%= cupon.id %>"
        action="/cupones/<%= cupon.id %>/delete"
        method="POST"
        class="mt-2"
      >
        <button
          type="button"
          onclick="confirmarEliminacionCupon('<%= cupon.id %>')"
          class="w-full bg-red-500 text-white py-2 rounded-md hover:bg-red-600 font-medium"
        >
          Eliminar Cupón
        </button>
      </form>
    </div>
    <% }) %>
  </div>
</section>
