<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= nombrePagina || 'Eventos - IESPR' %></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-image: url("/img/decoracion.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }

      .hamburger span {
        transition: all 0.3s ease;
      }

      .hamburger.active span:nth-child(1) {
        transform: rotate(45deg) translateY(8px);
      }

      .hamburger.active span:nth-child(2) {
        opacity: 0;
      }

      .hamburger.active span:nth-child(3) {
        transform: rotate(-45deg) translateY(-8px);
      }

      .card {
        transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
      }

      .card:hover {
        transform: translateY(-10px);
        box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.15);
      }
    </style>
  </head>
  <body class="min-h-screen text-gray-800 pt-20">
    <!-- Barra de navegación -->
    <nav
      class="fixed top-0 left-0 w-full z-50 bg-white/30 backdrop-blur-md shadow border-b border-gray-300"
    >
      <div
        class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"
      >
        <div class="flex items-center space-x-2">
          <i class="bx bxs-microphone-alt"></i>
          <span class="text-lg font-semibold text-gray-900">IESPR</span>
        </div>

        <button
          id="menu-toggle"
          class="hamburger md:hidden flex flex-col items-center justify-center w-8 h-8 space-y-1.5"
          aria-label="Abrir menú"
        >
          <span class="block w-6 h-0.5 bg-gray-800"></span>
          <span class="block w-6 h-0.5 bg-gray-800"></span>
          <span class="block w-6 h-0.5 bg-gray-800"></span>
        </button>

        <ul
          id="menu"
          class="transition-all duration-300 ease-in-out transform scale-95 opacity-0 md:opacity-100 md:scale-100 hidden md:flex flex-col md:flex-row md:items-center md:space-x-6 space-y-2 md:space-y-0 text-sm text-gray-700 text-center absolute md:static top-full left-0 w-full md:w-auto bg-white/30 md:bg-transparent backdrop-blur-md md:backdrop-blur-none md:shadow-none shadow-md py-4 md:py-0"
        >
          <li>
            <a href="/" class="block px-4 py-2 hover:underline">Inicio</a>
          </li>
          <li>
            <a href="/cupones" class="block px-4 py-2 hover:underline"
              >Cupones</a
            >
          </li>
          <li>
            <a href="/eventos" class="block px-4 py-2 hover:underline"
              >Eventos</a
            >
          </li>
          <li>
            <a href="/nosotros" class="block px-4 py-2 hover:underline"
              >Nosotros</a
            >
          </li>
          <li class="md:hidden">
            <a
              href="/login"
              class="bg-black text-white px-4 py-2 rounded hover:bg-gray-900 text-sm w-full block"
              >Iniciar sesión</a
            >
          </li>
        </ul>

        <a
          href="/login"
          class="hidden md:inline-block bg-black text-white px-4 py-2 rounded hover:bg-gray-900 text-sm"
          >Iniciar sesión</a
        >
      </div>
    </nav>

    <!-- Sección de Eventos -->
    <section class="px-6 py-20 min-h-screen bg-white/50 backdrop-blur-sm">
      <h2
        class="text-4xl font-extrabold text-center text-gray-900 mb-16 drop-shadow-md"
      >
        Próximos Eventos
      </h2>

      <div
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-7xl mx-auto"
      >
        <% listaEventos.forEach(evento => { %>
        <div
          class="group relative bg-white rounded-3xl overflow-hidden shadow-xl hover:shadow-2xl transition duration-500 card"
        >
          <div class="overflow-hidden">
            <img
              src="<%= evento.imagen_url %>"
              alt="Imagen del evento"
              class="w-full h-56 object-cover transition-transform duration-500 group-hover:scale-105"
            />
          </div>
          <div class="p-6">
            <h3
              class="text-2xl font-bold text-gray-800 mb-2 line-clamp-2 transition-all duration-300 group-hover:text-indigo-600"
            >
              <%= evento.titulo %>
            </h3>
            <div
              class="descripcion text-gray-600 text-sm"
              data-full="<%= evento.descripcion %>"
            ></div>
          </div>
        </div>
        <% }); %>
      </div>
    </section>

    <!-- Scripts -->
    <script>
      const menuToggle = document.getElementById("menu-toggle");
      const menu = document.getElementById("menu");

      menuToggle.addEventListener("click", () => {
        menu.classList.toggle("hidden");

        if (!menu.classList.contains("hidden")) {
          setTimeout(() => {
            menu.classList.remove("opacity-0", "scale-95");
            menu.classList.add("opacity-100", "scale-100");
            menu.classList.remove("bg-white/30", "backdrop-blur-md");
            menu.classList.add("bg-white");
          }, 10);
        } else {
          menu.classList.remove("opacity-100", "scale-100", "bg-white");
          menu.classList.add(
            "opacity-0",
            "scale-95",
            "bg-white/30",
            "backdrop-blur-md"
          );
        }

        menuToggle.classList.toggle("active");
      });

      // Leer más / Leer menos
      document.addEventListener("DOMContentLoaded", function () {
        const MAX_LENGTH = 150;

        document.querySelectorAll(".descripcion").forEach((desc) => {
          const fullText = desc.dataset.full;
          if (fullText.length <= MAX_LENGTH) {
            desc.textContent = fullText;
            return;
          }

          const shortText = fullText.slice(0, MAX_LENGTH) + "...";
          const textNode = document.createTextNode(shortText);
          const button = document.createElement("button");
          button.textContent = " Leer más";
          button.className = "text-blue-600 hover:underline ml-2";

          let expanded = false;

          button.addEventListener("click", () => {
            expanded = !expanded;
            desc.firstChild.textContent = expanded ? fullText : shortText;
            button.textContent = expanded ? " Leer menos" : " Leer más";
          });

          desc.appendChild(textNode);
          desc.appendChild(button);
        });
      });
    </script>
  </body>
</html>
